(function(d){var c=this.Presentation=new Class({Implements:[Events,Options],options:{},_startup:false,_containerRole:'[data-presentation-role="container"]',_contentsRole:'[data-presentation-role="content"]',initialize:function(f,e){var g=d(f);if(!g){throw new Error("The element of the object which applies a function is not found.")}this.setOptions(e);this._contents=new c.Container();this._setup(g)},addContent:function(e){e.addEvent("transitionEnd",this._onTransitionEnd.bind(this));this._contents.addContent(e)},addContents:function(e){e.each(function(f){this.addContent(f)},this)},set:function(e){var g=null,f=null;g=this.getCurrentContent();f=this._getContext(e);this.fireEvent("__deactivate__",[g]);this._contents.setCurrentIndex(e);this._changeContent(f);this._notifyChange()},first:function(){var e=this._contents.getFirstIndex();this.set(e)},prev:function(){var e=this._contents.getPrevIndex();if(e==null){return}this.set(e)},next:function(){var e=this._contents.getNextIndex();if(!e){return}this.set(e)},last:function(){var e=this._contents.getLastIndex();this.set(e)},start:function(){var e=this.getCurrentIndex(),f=this._getContext(e);this._contents.setCurrentIndex(e);this._changeContent(f);this._notifyChange();this._startup=true;this.fireEvent("start")},isStarted:function(){return this._startup},_setup:function(f){var e=d(f).getElement(this._containerRole);if(!e){throw new Error("The container element of contents is not found.")}var g=e.getElements(this._contentsRole);if(!g){throw new Error("The element of contents is not found.")}g.each(function(h){var i=new c.Content(h);this.addContent(i)},this);this._container=e;this._elements=g;this._layout=f},getLayoutElement:function(){return this._layout},getContainerElement:function(){return this._container},_onTransitionEnd:function(){if(this._moves++>=this.getLength()-1){this.fireEvent("transitionEnd",[this.getCurrentIndex(),this.getCurrentContent()]);this.fireEvent("__activate__",[this.getCurrentContent()])}},_changeContent:function(e){this._moves=0;this.fireEvent("transitionStart",[this.getCurrentContent()]);for(var f in e){var g=e[f];if(!g){continue}switch(typeOf(g)){case"array":g.invoke(f);break;case"object":g[f]();break;default:throw new TypeError("Invalid context.")}}},_notifyChange:function(){var e=[this._contents.getCurrentIndex(),this._contents.getLength(),this._contents.getCurrentContent()];this.fireEvent("change",e)},_getContext:function(e){var h=this._contents.getContent(e);var i=this._contents.getAfterContents(e);var g=this._contents.getBeforeContents(e);var f={forward:i||null,backward:g||null,center:h};return f},toElement:function(){return this.getLayoutElement()}});var b=["removeContent","removeContents","getCurrentIndex","getCurrentContent","getContent","getLength"];var a={};b.each(function(e){a[e]=function(){return this._contents[e].apply(this._contents,arguments)}});c.implement(a);c.Container=new Class({_index:0,_contents:[],initialize:function(e){if(e){this.addContents(e)}},addContent:function(e){if(!Type.isObject(e)){throw new TypeError("It is not object.")}this._contents.push(e);return this},addContents:function(e){e.each(function(f){this.addContent(f)},this);return this},removeContent:function(e){if(!Type.isObject(e)){throw new TypeError("It is not object.")}this._contents.erase(e);return this},removeContents:function(e){e.each(function(f){this.removeContent(f)},this);return this},setCurrentIndex:function(e){if(!this.isValid(e)){throw new RangeError("The index has come first at the end.")}this._index=e;return this},getCurrentIndex:function(){return this._index},getCurrentContent:function(){var e=this.getCurrentIndex();return this.getContent(e)},getContent:function(e){return this._contents[e]},getLength:function(){return this._contents.length},getBeforeContents:function(e){var g=[];for(var f=0;f<e;f++){g.push(this.getContent(f))}return(g.length>0)?g:null},getAfterContents:function(f){var h=[];var e=this.getLength();for(var g=f+1;g<e;g++){h.push(this.getContent(g))}return(h.length>0)?h:null},isValid:function(e){return(e>=0&&e<this.getLength())?true:false},hasPrevContent:function(){return(this.isValid(this._index-1))?true:false},hasNextContent:function(){return(this.isValid(this._index+1))?true:false},getFirstIndex:function(){return 0},getPrevIndex:function(){if(!this.hasPrevContent()){return}return this._index-1},getNextIndex:function(){if(!this.hasNextContent()){return}return this._index+1},getLastIndex:function(){return this.getLength()-1}});(function(f){var g={initialize:function(i,h){this.setOptions(h);this._element=i},forward:function(){this._element.setStyle("left","150%")},backward:function(){this._element.setStyle("left","-50%")},center:function(){this._element.setStyle("left","50%")},toElement:function(){return this._element}};var e=function(h){return function(){this.fireEvent("transitionStart",[this]);h.call(this);this.fireEvent("transitionEnd",[this])}};["backward","forward","center"].each(function(h){g[h]=e(g[h])});f.Content=new Class(Object.merge({Implements:[Events,Options]},g))}(c))}(document.id));(function(c,b,a){a.implement({displayFullScreen:function(){var d=0;if(c.innerHeight){d=c.innerHeight}else{if(b.documentElement.clientHeight){d=b.documentElement.clientHeight}else{if(b.body.clientHeight){d=b.body.clientHeight}}}for(var f=0;l=this.getLength(),f<l;f++){var g=this.getContent(f).toElement();g.setStyles({height:d,width:"100%","margin-left":"-50%"})}var e=this.getContainerElement();e.setStyles({height:d,width:"100%"});return this}})}(this,document,Presentation));(function(b){var d=["activate","deactivate"];function a(e){if(!Type.isObject(e)){throw new TypeError("invalid filter")}return e}function c(e){if(!Type.isArray(e)){throw new TypeError("invalid filters")}return e}b.Filter=new Class({filters:[],addFilter:function(f){var e=this;this.filters.push(a(f));d.each(function(g){if(Type.isFunction(f[g])===true){f[g]=f[g].bind(f)}e._enableListener("__"+g+"__",f[g]||null)});return this},addFilters:function(f){var e=c(f);e.each(function(h,g){this.addFilter(h)},this);return this},removeFilter:function(f){var e=this;if(!this.hasFilter(f)){return this}this.filters.erase(a(f));d.each(function(g){e._disableListener("__"+g+"__",f[g]||null)});return this},removeFilters:function(f){var e=c(f);e.each(function(h,g){this.removeFilter(h)},this);return this},hasFilter:function(e){return this.filters.contains(e)},applyFilter:function(e,g){var f=this.filters;f.each(function(h){if(!h[e]){return}h[e](g)})},_enableListener:function(e,f){if(!f){return this}this.addEvent(e,f);return this},_disableListener:function(e,f){if(!f){return this}this.removeEvent(e,f);return this}});b.implement(new b.Filter())}(Presentation));(function(){function a(c){if(!(Type.isFunction(c.bind)&&Type.isFunction(c.unbind))){throw new TypeError("It is an invalid helper.")}return c}var b=this.Helper=new Class({_helpers:{},addHelper:function(f){var d=null,e=this,c=a(f);c.addEvents({enable:function(){e.fireEvent("enableHelper",[c])},disable:function(){e.fireEvent("disableHelper",[c])}}).bind(this);this.fireEvent("bindHelper",[c]);d=c.getName();this._helpers[d]=c;return this},addHelpers:function(){var c=Array.from(arguments);c.each(function(d){this.addHelper(d)},this);return this},removeHelper:function(e){var c=a(e),d=c.getName();c.unbind().destroy();delete this._helpers[d];this.fireEvent("unbindHelper",[c]);return this},removeHelpers:function(){var c=Array.from(arguments);if(c.length<=0){c=this.getHelpers()}c.each(function(d){this.removeHelper(d)},this);return this},getHelper:function(c){if(!this.hasHelper(c)){throw new Error("Helper "+c+" is not found.")}return this._helpers[c]},getHelpers:function(){var c=[],d=Array.from(arguments);if(d.length<=0){d=Object.keys(this._helpers)}d.each(function(e){c.push(this.getHelper(e))},this);return c},enableHelper:function(c){var d=this.getHelper(c);d.setEnable(true);return this},disableHelper:function(c){var d=this.getHelper(c);d.setEnable(false);return this},hasHelper:function(c){return(this._helpers[c])?true:false},isEnableHelper:function(c){var d=this.getHelper(c);return d.isEnable()},isDisableHelper:function(c){var d=this.getHelper(c);return(d.isEnable())?false:true}});b.Assigns={Assigns:function(e){if(!this.prototype.setOptions){return}var d=this.prototype.setOptions;var c=function(f){if(!f){return}e.each(function(g){if(f[g]){var j=g.capitalize();var i="set"+j;if(this[i]){var h=this[i];h.call(this,f[g])}delete f[g]}},this);d.call(this,f)};this.prototype.setOptions=c}};Object.append(Class.Mutators,b.Assigns);b.Pluggable=new Class({Implements:[Options,Events],Assigns:["name","target","enable"],_name:null,_target:null,_enable:true,_setuped:false,setName:function(c){if(!Type.isString(c)){throw new TypeError("Name should be a character string.")}this._name=c;return this},getName:function(){return this._name},setTarget:function(c){if(!(Type.isObject(c)||c==null)){throw new TypeError("Specified target is not an object or null.")}this._target=c;return this},getTarget:function(){return this._target},setObserver:function(c){if(!(Type.isObject(c)||Type.isElement(c))){throw new TypeError("Specified observer is an object or not element.")}this._observer=c;return this},getObserver:function(){return this._observer},setEnable:function(c){if(this.isEnable()==c){return}if(this.isSetuped()===false){this._setupHelper()}return this._chageStatus(c)},_setupHelper:function(){this.setup();this._setuped=true},isSetuped:function(){return this._setuped},_chageStatus:function(d){var c=(d)?"enable":"disable";this[c]();this.fireEvent(c);this._enable=d;return this},bind:function(c){if(!Type.isObject(c)){throw new TypeError("It is an invalid object.")}this.setTarget(c);if(this.isSetuped()===false){this._setupHelper()}if(this.isEnable()){this._chageStatus(true)}return this},unbind:function(){this.setEnable(false);this.setTarget(null);this._setuped=false;return this},isEnable:function(){return(this._enable)?true:false}})}());(function(a){a.Helper={};a.implement(new Helper())}(Presentation));(function(b,a){a.Delegator=new Class({Implements:[a.Pluggable],Assigns:["name","target","observer","methods","enable"],_observer:null,_methods:{},initialize:function(c){this.setOptions(c)},setObserver:function(c){if(!(Type.isObject(c)||Type.isElement(c))){throw new TypeError("Specified observer is an object or not element.")}this._observer=c;return this},getObserver:function(){return this._observer},getMethod:function(c){if(!this.hasMethod(c)){throw new Error("The specification "+c+" method is not found.")}return this._methods[c]},getMethods:function(){var c=[],d=Array.from(arguments);if(d.length<=0){d=Object.keys(this._methods)}d.each(function(e){c.push(this.getMethod(e))},this);return c},setMethods:function(c){this._methods={};this.addMethods(c)},addMethod:function(c,d){if(this.hasMethod(d)){return}this._methods[c]=d;return this},addMethods:function(c){for(var d in c){this.addMethod(d,c[d])}return this},removeMethod:function(c){if(!this.hasMethod(c)){throw new TypeError("Because method "+c+" doesn't exist, it is not possible to delete it.")}delete this._methods[c];return this},removeMethods:function(){var c=Array.from(arguments);if(c.length<=0){c=this.getMethods()}c.each(function(d){this.removeMethod(d)},this);return this},hasMethod:function(c){return(this._methods[c])?true:false},delegate:function(d,c){var f=this.getMethod(d),e=this.getTarget();if(!Type.isFunction(e[f])){throw new Error("Method "+f+" doesn't exist or it is an invalid method.")}c=c||[];e[f](c)}})}(document,Helper));(function(b,a){a.Keyboard=new Class({Extends:a.Delegator,_name:"keyboard",_handler:null,_observer:b,_onKeydown:function(c){if(!this.isEnable()){return}if(!this.hasMethod(c.key)){return}this.delegate(c.key)},setup:function(){this._handler=this._onKeydown.bind(this)},enable:function(){var c=this.getObserver();c.addEvent("keydown",this._handler)},disable:function(){var c=this.getObserver();c.removeEvent("keydown",this._handler)},destroy:function(){delete this._handler}})}(document,Helper));(function(b,c){var d={j:"prev",k:"next",left:"prev",right:"next","0":"first","4":"last"};function e(h){var g=null,f=null;h=h||{};f=h.keybinds||{};g=a(f);delete h.keybinds;h.methods=Object.merge(d,g);return new Helper.Keyboard(h)}function a(h){if(!h){return{}}var g={};var i=Object.keys(h);var f=Object.values(h);f.each(function(k,j){switch(typeOf(k)){case"string":g[k]=i[j];break;case"array":k.each(function(m){g[m]=i[j]});break;default:throw new TypeError("Helper's option is an illegal value.")}});return g}c.Keyboard=e}(Presentation,Presentation.Helper));(function(c,a,b){b.Page=new Class({Implements:[Helper.Pluggable],options:{current:"current",total:"total"},_name:"page",_current:null,_total:null,_handler:null,initialize:function(d){this.setOptions(d)},setup:function(){var d=this.getTarget().getLayoutElement(),e=this.options;this._current=d.getElement("."+e.current);this._total=d.getElement("."+e.total);this._handler=this._onChange.bind(this)},enable:function(){var d=this.getTarget();d.addEvent("change",this._handler)},disable:function(){var d=this.getTarget();d.removeEvent("change",this._handler)},destroy:function(){delete this._current;delete this._total;delete this._handler},_onChange:function(d,f,e){this._current.set("html",d+1);this._total.set("html",f)}})}(document.id,Presentation,Presentation.Helper));(function(c,a,b){b.Controller=new Class({Extends:Helper.Delegator,options:{first:"first",prev:"prev",next:"next",last:"last",disabled:"disabled"},_name:"controller",_keys:["first","prev","next","last"],_methods:{first:"first",prev:"prev",next:"next",last:"last"},_handlers:{},_changeState:null,setup:function(){var d=this.getTarget().getLayoutElement(),e=null;this._changeState=this._onChange.bind(this);this._keys.each(function(f){e=d.getElement("."+this.options[f]);if(!e){throw new Error("The button "+f+" is not found.")}this["_"+f]=e},this);this._createHandlers()},enable:function(){this.getTarget().addEvent("change",this._changeState);this._keys.each(function(d){this["_"+d].addEvent("click",this._getHandler(d))},this)},disable:function(){this.getTarget().removeEvent("change",this._changeState);this._keys.each(function(d){this["_"+d].removeEvent("click",this._getHandler(d))},this)},destroy:function(){this._keys.each(function(d){delete this["_"+d]},this)},_onChange:function(g,f,e){var d=g+1;if(d<=1){this._changeButtonState(["next","last"])}else{if(d>=f){this._changeButtonState(["first","prev"])}else{this._changeButtonState(["first","prev","next","last"])}}},_changeButtonState:function(e){var d=this.options.disabled;this._keys.each(function(f){if(e.contains(f)){this["_"+f].removeClass(d)}else{this["_"+f].addClass(d)}},this)},_getHandler:function(d){return this._handlers[d]},_createHandlers:function(){this._keys.each(function(d){this._handlers[d]=this._createHandler(d)},this);return this._handlers},_createHandler:function(d){var e=this;return function(f){e.delegate(d)}}})}(document.id,Presentation,Presentation.Helper));