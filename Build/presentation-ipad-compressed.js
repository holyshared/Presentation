(function(h){var g=this.Presentation=new Class({Implements:[Events,Options],options:{},_startup:false,_containerRole:'[data-presentation-role="container"]',_contentsRole:'[data-presentation-role="content"]',initialize:function(j,i){var k=h(j);if(!k){throw new Error("The element of the object which applies a function is not found.")}this.setOptions(i);this._contents=new g.Container();this._setup(k)},addContent:function(i){i.addEvent("transitionEnd",this._onTransitionEnd.bind(this));this._contents.addContent(i)},addContents:function(i){i.each(function(j){this.addContent(j)},this)},set:function(i){var k=null,j=null;k=this.getCurrentContent();j=this._getContext(i);this.fireEvent("__deactivate__",[k]);this._contents.setCurrentIndex(i);this._changeContent(j);this._notifyChange()},first:function(){var i=this._contents.getFirstIndex();this.set(i)},prev:function(){var i=this._contents.getPrevIndex();if(i==null){return}this.set(i)},next:function(){var i=this._contents.getNextIndex();if(!i){return}this.set(i)},last:function(){var i=this._contents.getLastIndex();this.set(i)},start:function(){var i=this.getCurrentIndex(),j=this._getContext(i);this._contents.setCurrentIndex(i);this._changeContent(j);this._notifyChange();this._startup=true;this.fireEvent("start")},isStarted:function(){return this._startup},_setup:function(j){var i=h(j).getElement(this._containerRole);if(!i){throw new Error("The container element of contents is not found.")}var k=i.getElements(this._contentsRole);if(!k){throw new Error("The element of contents is not found.")}k.each(function(m){var n=new g.Content(m);this.addContent(n)},this);this._container=i;this._elements=k;this._layout=j},getLayoutElement:function(){return this._layout},getContainerElement:function(){return this._container},_onTransitionEnd:function(){if(this._moves++>=this.getLength()-1){this.fireEvent("transitionEnd",[this.getCurrentIndex(),this.getCurrentContent()]);this.fireEvent("__activate__",[this.getCurrentContent()])}},_changeContent:function(i){this._moves=0;this.fireEvent("transitionStart",[this.getCurrentContent()]);for(var j in i){var k=i[j];if(!k){continue}switch(typeOf(k)){case"array":k.invoke(j);break;case"object":k[j]();break;default:throw new TypeError("Invalid context.")}}},_notifyChange:function(){var i=[this._contents.getCurrentIndex(),this._contents.getLength(),this._contents.getCurrentContent()];this.fireEvent("change",i)},_getContext:function(i){var m=this._contents.getContent(i);var n=this._contents.getAfterContents(i);var k=this._contents.getBeforeContents(i);var j={forward:n||null,backward:k||null,center:m};return j},toElement:function(){return this.getLayoutElement()}});var c=["removeContent","removeContents","getCurrentIndex","getCurrentContent","getContent","getLength"];var b={};c.each(function(i){b[i]=function(){return this._contents[i].apply(this._contents,arguments)}});g.implement(b);g.Container=new Class({_index:0,_contents:[],initialize:function(i){if(i){this.addContents(i)}},addContent:function(i){if(!Type.isObject(i)){throw new TypeError("It is not object.")}this._contents.push(i);return this},addContents:function(i){i.each(function(j){this.addContent(j)},this);return this},removeContent:function(i){if(!Type.isObject(i)){throw new TypeError("It is not object.")}this._contents.erase(i);return this},removeContents:function(i){i.each(function(j){this.removeContent(j)},this);return this},setCurrentIndex:function(i){if(!this.isValid(i)){throw new RangeError("The index has come first at the end.")}this._index=i;return this},getCurrentIndex:function(){return this._index},getCurrentContent:function(){var i=this.getCurrentIndex();return this.getContent(i)},getContent:function(i){return this._contents[i]},getLength:function(){return this._contents.length},getBeforeContents:function(j){var m=[];for(var k=0;k<j;k++){m.push(this.getContent(k))}return(m.length>0)?m:null},getAfterContents:function(k){var n=[];var j=this.getLength();for(var m=k+1;m<j;m++){n.push(this.getContent(m))}return(n.length>0)?n:null},isValid:function(i){return(i>=0&&i<this.getLength())?true:false},hasPrevContent:function(){return(this.isValid(this._index-1))?true:false},hasNextContent:function(){return(this.isValid(this._index+1))?true:false},getFirstIndex:function(){return 0},getPrevIndex:function(){if(!this.hasPrevContent()){return}return this._index-1},getNextIndex:function(){if(!this.hasNextContent()){return}return this._index+1},getLastIndex:function(){return this.getLength()-1}});var f={Legacy:function(i){return function(){this.fireEvent("transitionStart",[this]);i.call(this);this.fireEvent("transitionEnd",[this])}},Modan:function(i){return function(){this.fireEvent("transitionStart",[this]);i.call(this)}}};var e={forward:function(){this._element.setStyle("left","150%")},backward:function(){this._element.setStyle("left","-50%")},center:function(){this._element.setStyle("left","50%")},toElement:function(){return this._element}};var d,a;if(Browser.chrome||Browser.safari){a="webkitTransitionEnd"}else{if(Browser.firefox){a="transitionend"}else{if(Browser.opera){a="oTransitionEnd"}else{a="msTransitionEnd"}}}if(Browser.ie&&Browser.version<=9){Object.merge(e,{initialize:function(j,i){this.setOptions(i);this._element=j}});d=f.Modan}else{Object.merge(e,{initialize:function(j,i){this.setOptions(i);this._element=j;this._element.addEventListener(a,function(){this.fireEvent("transitionEnd",[this])},false)}});d=f.Legacy}["backward","forward","center"].each(function(i){e[i]=d(e[i])});g.Content=new Class(Object.merge({Implements:[Events,Options]},e))}(document.id));(function(c,b,a){a.implement({displayFullScreen:function(){var d=0;if(c.innerHeight){d=c.innerHeight}else{if(b.documentElement.clientHeight){d=b.documentElement.clientHeight}else{if(b.body.clientHeight){d=b.body.clientHeight}}}for(var f=0;l=this.getLength(),f<l;f++){var g=this.getContent(f).toElement();g.setStyles({height:d,width:"100%","margin-left":"-50%"})}var e=this.getContainerElement();e.setStyles({height:d,width:"100%"});return this}})}(this,document,Presentation));(function(b){var d=["activate","deactivate"];function a(e){if(!Type.isObject(e)){throw new TypeError("invalid filter")}return e}function c(e){if(!Type.isArray(e)){throw new TypeError("invalid filters")}return e}b.Filter=new Class({filters:[],addFilter:function(f){var e=this;this.filters.push(a(f));d.each(function(g){if(Type.isFunction(f[g])===true){f[g]=f[g].bind(f)}e._enableListener("__"+g+"__",f[g]||null)});return this},addFilters:function(f){var e=c(f);e.each(function(h,g){this.addFilter(h)},this);return this},removeFilter:function(f){var e=this;if(!this.hasFilter(f)){return this}this.filters.erase(a(f));d.each(function(g){e._disableListener("__"+g+"__",f[g]||null)});return this},removeFilters:function(f){var e=c(f);e.each(function(h,g){this.removeFilter(h)},this);return this},hasFilter:function(e){return this.filters.contains(e)},applyFilter:function(e,g){var f=this.filters;f.each(function(h){if(!h[e]){return}h[e](g)})},_enableListener:function(e,f){if(!f){return this}this.addEvent(e,f);return this},_disableListener:function(e,f){if(!f){return this}this.removeEvent(e,f);return this}});b.implement(new b.Filter())}(Presentation));(function(){function a(c){if(!(Type.isFunction(c.bind)&&Type.isFunction(c.unbind))){throw new TypeError("It is an invalid helper.")}return c}var b=this.Helper=new Class({_helpers:{},addHelper:function(f){var d=null,e=this,c=a(f);c.addEvents({enable:function(){e.fireEvent("enableHelper",[c])},disable:function(){e.fireEvent("disableHelper",[c])}}).bind(this);this.fireEvent("bindHelper",[c]);d=c.getName();this._helpers[d]=c;return this},addHelpers:function(){var c=Array.from(arguments);c.each(function(d){this.addHelper(d)},this);return this},removeHelper:function(e){var c=a(e),d=c.getName();c.unbind().destroy();delete this._helpers[d];this.fireEvent("unbindHelper",[c]);return this},removeHelpers:function(){var c=Array.from(arguments);if(c.length<=0){c=this.getHelpers()}c.each(function(d){this.removeHelper(d)},this);return this},getHelper:function(c){if(!this.hasHelper(c)){throw new Error("Helper "+c+" is not found.")}return this._helpers[c]},getHelpers:function(){var c=[],d=Array.from(arguments);if(d.length<=0){d=Object.keys(this._helpers)}d.each(function(e){c.push(this.getHelper(e))},this);return c},enableHelper:function(c){var d=this.getHelper(c);d.setEnable(true);return this},disableHelper:function(c){var d=this.getHelper(c);d.setEnable(false);return this},hasHelper:function(c){return(this._helpers[c])?true:false},isEnableHelper:function(c){var d=this.getHelper(c);return d.isEnable()},isDisableHelper:function(c){var d=this.getHelper(c);return(d.isEnable())?false:true}});b.Assigns={Assigns:function(e){if(!this.prototype.setOptions){return}var d=this.prototype.setOptions;var c=function(f){if(!f){return}e.each(function(g){if(f[g]){var j=g.capitalize();var i="set"+j;if(this[i]){var h=this[i];h.call(this,f[g])}delete f[g]}},this);d.call(this,f)};this.prototype.setOptions=c}};Object.append(Class.Mutators,b.Assigns);b.Pluggable=new Class({Implements:[Options,Events],Assigns:["name","target","enable"],_name:null,_target:null,_enable:true,_setuped:false,setName:function(c){if(!Type.isString(c)){throw new TypeError("Name should be a character string.")}this._name=c;return this},getName:function(){return this._name},setTarget:function(c){if(!(Type.isObject(c)||c==null)){throw new TypeError("Specified target is not an object or null.")}this._target=c;return this},getTarget:function(){return this._target},setObserver:function(c){if(!(Type.isObject(c)||Type.isElement(c))){throw new TypeError("Specified observer is an object or not element.")}this._observer=c;return this},getObserver:function(){return this._observer},setEnable:function(c){if(this.isEnable()==c){return}if(this.isSetuped()===false){this._setupHelper()}return this._chageStatus(c)},_setupHelper:function(){this.setup();this._setuped=true},isSetuped:function(){return this._setuped},_chageStatus:function(d){var c=(d)?"enable":"disable";this[c]();this.fireEvent(c);this._enable=d;return this},bind:function(c){if(!Type.isObject(c)){throw new TypeError("It is an invalid object.")}this.setTarget(c);if(this.isSetuped()===false){this._setupHelper()}if(this.isEnable()){this._chageStatus(true)}return this},unbind:function(){this.setEnable(false);this.setTarget(null);this._setuped=false;return this},isEnable:function(){return(this._enable)?true:false}})}());(function(a){a.Helper={};a.implement(new Helper())}(Presentation));(function(b,a){a.Delegator=new Class({Implements:[a.Pluggable],Assigns:["name","target","observer","methods","enable"],_observer:null,_methods:{},initialize:function(c){this.setOptions(c)},setObserver:function(c){if(!(Type.isObject(c)||Type.isElement(c))){throw new TypeError("Specified observer is an object or not element.")}this._observer=c;return this},getObserver:function(){return this._observer},getMethod:function(c){if(!this.hasMethod(c)){throw new Error("The specification "+c+" method is not found.")}return this._methods[c]},getMethods:function(){var c=[],d=Array.from(arguments);if(d.length<=0){d=Object.keys(this._methods)}d.each(function(e){c.push(this.getMethod(e))},this);return c},setMethods:function(c){this._methods={};this.addMethods(c)},addMethod:function(c,d){if(this.hasMethod(d)){return}this._methods[c]=d;return this},addMethods:function(c){for(var d in c){this.addMethod(d,c[d])}return this},removeMethod:function(c){if(!this.hasMethod(c)){throw new TypeError("Because method "+c+" doesn't exist, it is not possible to delete it.")}delete this._methods[c];return this},removeMethods:function(){var c=Array.from(arguments);if(c.length<=0){c=this.getMethods()}c.each(function(d){this.removeMethod(d)},this);return this},hasMethod:function(c){return(this._methods[c])?true:false},delegate:function(d,c){var f=this.getMethod(d),e=this.getTarget();if(!Type.isFunction(e[f])){throw new Error("Method "+f+" doesn't exist or it is an invalid method.")}e[f].apply(e,c)}})}(document,Helper));(function(b,a){a.Swipe=new Class({Extends:a.Delegator,_name:"swipe",_handler:null,setup:function(){var c=this.getObserver();if(!c){this.setObserver(b.body)}this._handler=this._onSwipe.bind(this)},_onSwipe:function(c){if(!this.isEnable()){return}if(!this.hasMethod(c.direction)){return}this.delegate(c.direction)},_getObserver:function(){var d=this.getTarget(),c=this.getObserver();if(d.toElement){c=d.toElement()}return c}.protect(),enable:function(){var c=this._getObserver();c.addEvent("swipe",this._handler)},disable:function(){var c=this._getObserver();c.removeEvent("swipe",this._handler)},destroy:function(){delete this._handler}})}(document,Helper));(function(a,b){function c(d){var f=null,e=null;f={methods:{left:"next",right:"prev"}};d=Object.merge(f,d);return new Helper.Swipe(d)}b.Swipe=c}(Presentation,Presentation.Helper));(function(b,a){a.Keyboard=new Class({Extends:a.Delegator,_name:"keyboard",_handler:null,_observer:b,_onKeydown:function(c){if(!this.isEnable()){return}if(!this.hasMethod(c.key)){return}this.delegate(c.key)},setup:function(){this._handler=this._onKeydown.bind(this)},enable:function(){var c=this.getObserver();c.addEvent("keydown",this._handler)},disable:function(){var c=this.getObserver();c.removeEvent("keydown",this._handler)},destroy:function(){delete this._handler}})}(document,Helper));(function(b,c){var d={j:"prev",k:"next",left:"prev",right:"next","0":"first","4":"last"};function e(h){var g=null,f=null;h=h||{};f=h.keybinds||{};g=a(f);delete h.keybinds;h.methods=Object.merge(d,g);return new Helper.Keyboard(h)}function a(h){if(!h){return{}}var g={};var i=Object.keys(h);var f=Object.values(h);f.each(function(k,j){switch(typeOf(k)){case"string":g[k]=i[j];break;case"array":k.each(function(m){g[m]=i[j]});break;default:throw new TypeError("Helper's option is an illegal value.")}});return g}c.Keyboard=e}(Presentation,Presentation.Helper));(function(c,a,b){b.Page=new Class({Implements:[Helper.Pluggable],options:{current:"current",total:"total"},_name:"page",_current:null,_total:null,_handler:null,initialize:function(d){this.setOptions(d)},setup:function(){var d=this.getTarget().getLayoutElement(),e=this.options;this._current=d.getElement("."+e.current);this._total=d.getElement("."+e.total);this._handler=this._onChange.bind(this)},enable:function(){var d=this.getTarget();d.addEvent("change",this._handler)},disable:function(){var d=this.getTarget();d.removeEvent("change",this._handler)},destroy:function(){delete this._current;delete this._total;delete this._handler},_onChange:function(d,f,e){this._current.set("html",d+1);this._total.set("html",f)}})}(document.id,Presentation,Presentation.Helper));(function(c,a,b){b.Controller=new Class({Extends:Helper.Delegator,options:{first:"first",prev:"prev",next:"next",last:"last",disabled:"disabled"},_name:"controller",_keys:["first","prev","next","last"],_methods:{first:"first",prev:"prev",next:"next",last:"last"},_handlers:{},_changeState:null,setup:function(){var d=this.getTarget().getLayoutElement(),e=null;this._changeState=this._onChange.bind(this);this._keys.each(function(f){e=d.getElement("."+this.options[f]);if(!e){throw new Error("The button "+f+" is not found.")}this["_"+f]=e},this);this._createHandlers()},enable:function(){this.getTarget().addEvent("change",this._changeState);this._keys.each(function(d){this["_"+d].addEvent("click",this._getHandler(d))},this)},disable:function(){this.getTarget().removeEvent("change",this._changeState);this._keys.each(function(d){this["_"+d].removeEvent("click",this._getHandler(d))},this)},destroy:function(){this._keys.each(function(d){delete this["_"+d]},this)},_onChange:function(g,f,e){var d=g+1;if(d<=1){this._changeButtonState(["next","last"])}else{if(d>=f){this._changeButtonState(["first","prev"])}else{this._changeButtonState(["first","prev","next","last"])}}},_changeButtonState:function(e){var d=this.options.disabled;this._keys.each(function(f){if(e.contains(f)){this["_"+f].removeClass(d)}else{this["_"+f].addClass(d)}},this)},_getHandler:function(d){return this._handlers[d]},_createHandlers:function(){this._keys.each(function(d){this._handlers[d]=this._createHandler(d)},this);return this._handlers},_createHandler:function(d){var e=this;return function(f){e.delegate(d)}}})}(document.id,Presentation,Presentation.Helper));